webpackJsonp([1],{"+VGo":function(t,e){},0:function(t,e,i){t.exports=i("NHnr")},1:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("/5sW");const s=function(t,e="x"){return"x"===e?t.pageX:t.pageY},n=t=>{return t=Math.floor(t),t<10?"0"+t:t+""},l=t=>{let e=0;return e=Math.floor(t/60),t-=60*e,n(e)+":"+n(t)};var r={props:{sources:Array,options:{type:Object,default(){return{autoplay:!1,volume:.9,poster:""}}}},data(){return{$video:null,video:{$videoSlider:null,len:0,current:0,loaded:0,moving:!1,displayTime:"00:00",pos:{start:0,width:0,innerWidth:0,current:0}},volume:{$volBox:null,muted:!1,percent:60,moving:!1,pos:{start:0,width:0,innerWidth:0,current:0}},player:{$player:null,pos:null},tmp:{contrlHideTimer:null},state:{contrlShow:!0,vol:.5,currentTime:0,fullScreen:!1,playing:!1}}},ready(){this.init()},mounted(){this.init()},beforeDestroy(){document.body.removeEventListener("mousemove",this.mouseMoveAction),document.body.removeEventListener("mouseup",this.mouseUpAction)},methods:{init(){this.$video=this.$el.getElementsByTagName("video")[0],this.initCore(),this.options.autoplay&&this.play(),document.body.addEventListener("mousemove",this.mouseMoveAction,!1),document.body.addEventListener("mouseup",this.mouseUpAction,!1)},initCore(){this.initVol(),this.initVideo(),this.initPlayer();const t=this.options.volume||.9;this.setVol(t)},initPlayer(){const t=this.$el.getElementsByClassName("__cov-video-container")[0];this.player.pos=t.getBoundingClientRect(),this.player.$player=t},initVol(){const t=this.$el.getElementsByClassName("__cov-contrl-vol-slider")[0],e=t.getElementsByClassName("__cov-contrl-vol-inner")[0];this.volume.$volBox=t,this.volume.pos.innerWidth=e.getBoundingClientRect().width,this.volume.pos.start=t.getBoundingClientRect().left,this.volume.pos.width=t.getBoundingClientRect().width-this.volume.pos.innerWidth},initVideo(){const t=this.$el.getElementsByClassName("__cov-contrl-video-slider")[0],e=t.getElementsByClassName("__cov-contrl-video-inner")[0];this.$videoSlider=t,this.video.pos.start=t.getBoundingClientRect().left,this.video.pos.innerWidth=e.getBoundingClientRect().width,this.video.pos.width=t.getBoundingClientRect().width-this.video.pos.innerWidth,this.getTime()},mouseEnterVideo(){this.tmp.contrlHideTimer&&(clearTimeout(this.tmp.contrlHideTimer),this.tmp.contrlHideTimer=null),this.state.contrlShow=!0},mouseLeaveVideo(t){this.tmp.contrlHideTimer&&clearTimeout(this.tmp.contrlHideTimer),this.tmp.contrlHideTimer=setTimeout(()=>{this.state.contrlShow=!1,this.tmp.contrlHideTimer=null},2e3)},toggleContrlShow(){this.state.contrlShow=!this.state.contrlShow},getTime(){this.$video.addEventListener("durationchange",t=>{console.log(t)}),this.$video.addEventListener("progress",t=>{this.video.loaded=100*(this.$video.buffered.end(0)/this.$video.duration-1)}),this.video.len=this.$video.duration},setVideoByTime(t){this.$video.currentTime=Math.floor(t*this.video.len)},play(){this.state.playing=!this.state.playing,this.$video&&(this.state.playing?(this.$video.play(),this.mouseLeaveVideo(),this.$video.addEventListener("timeupdate",this.timeline),this.$video.addEventListener("ended",t=>{this.state.playing=!1,this.video.pos.current=0,this.$video.currentTime=0})):this.$video.pause())},timeline(){const t=this.$video.currentTime/this.$video.duration;this.video.pos.current=(this.video.pos.width*t).toFixed(3),this.video.displayTime=l(this.$video.duration-this.$video.currentTime)},volMove(t){this.initVol(),this.volume.moving=!0},videoMove(t){this.initVideo(),this.video.moving=!0},slideClick(t){this.videoSlideMove(t)},volSlideClick(t){this.volSlideMove(t)},volMuted(){this.$video.muted=!this.$video.muted,this.volume.muted=this.$video.muted},setVol(t){this.$video&&(this.volume.pos.current=t*this.volume.pos.width,this.volume.percent=100*t,this.$video.volume=t)},fullScreen(){this.state.fullScreen?(this.state.fullScreen=!1,document.webkitCancelFullScreen()):(this.state.fullScreen=!0,this.$video.webkitRequestFullScreen()),setTimeout(this.initVideo,200)},mouseMoveAction(t){this.volume.moving&&this.volSlideMove(t),this.video.moving&&this.videoSlideMove(t),this.contrlHider(t)},contrlHider(t){const e=s(t,"x"),i=s(t,"y");if(this.player.pos)return e>this.player.pos.left&&e<this.player.pos.left+this.player.pos.width&&i>this.player.pos.top+.6*this.player.pos.height&&i<this.player.pos.top+this.player.pos.height?this.mouseEnterVideo():this.mouseLeaveVideo()},volSlideMove(t){const e=s(t)-this.volume.pos.start;e>0&&e<this.volume.pos.width&&this.setVol(e/this.volume.pos.width)},videoSlideMove(t){const e=s(t)-this.video.pos.start;e>0&&e<this.video.pos.width&&(this.video.pos.current=e,this.setVideoByTime(e/this.video.pos.width))},mouseUpAction(t){this.volume.moving=!1,this.video.moving=!1}}},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"container"},[i("div",{staticClass:"__cov-video-container",on:{mouseenter:t.mouseEnterVideo,mouseleave:t.mouseLeaveVideo}},[i("video",{staticClass:"__cov-video",class:{"hide-cursor":!t.state.contrlShow},attrs:{poster:t.options.poster}},t._l(t.sources,function(t){return i("source",{attrs:{src:t.src,type:t.type}})})),i("div",{directives:[{name:"show",rawName:"v-show",value:t.state.contrlShow,expression:"state.contrlShow"}],staticClass:"__cov-contrl-content",attrs:{transition:"fade"}},[i("button",{staticClass:"__cov-contrl-play-btn",on:{click:t.play}},[i("svg",{directives:[{name:"show",rawName:"v-show",value:!t.state.playing,expression:"!state.playing"}],staticClass:"__cov-contrl-play-btn-icon",attrs:{viewBox:"0 0 47 57",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[i("title",[t._v("Triangle 1")]),i("desc",[t._v("Created with Sketch.")]),i("defs"),i("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[i("polygon",{attrs:{id:"Triangle-1",stroke:"#FFFFFF",fill:"#FFFFFF",points:"1 56 1 1 47 28.5"}})])]),i("svg",{directives:[{name:"show",rawName:"v-show",value:t.state.playing,expression:"state.playing"}],staticClass:"__cov-contrl-play-btn-icon",attrs:{viewBox:"0 0 15 22",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[i("title",[t._v("Combined Shape")]),i("desc",[t._v("Created with Sketch.")]),i("defs",[i("path",{attrs:{d:"M0,0.979149244 L5,0.979149244 L5,22 L0,22 L0,0.979149244 Z M10,0.979149244 L15,0.979149244 L15,22 L10,22 L10,0.979149244 Z",id:"path-1"}}),i("mask",{attrs:{id:"mask-2",maskContentUnits:"userSpaceOnUse",maskUnits:"objectBoundingBox",x:"0",y:"0",width:"15",height:"21.0208508",fill:"white"}},[i("use",{attrs:{"xlink:href":"#path-1"}})])]),i("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[i("use",{attrs:{id:"Combined-Shape",stroke:"#FFFFFF",mask:"url(#mask-2)","stroke-width":"2",fill:"#FFFFFF","xlink:href":"#path-1"}})])])]),i("div",{staticClass:"__cov-contrl-video-slider",on:{click:t.slideClick,mousedown:t.videoMove}},[i("div",{staticClass:"__cov-contrl-video-inner",style:{transform:"translate3d("+t.video.pos.current+"px, 0, 0)"}}),i("div",{staticClass:"__cov-contrl-video-rail"},[i("div",{staticClass:"__cov-contrl-video-rail-inner",style:{transform:"translate3d("+t.video.loaded+"%, 0, 0)"}})])]),i("div",{staticClass:"__cov-contrl-video-time"},[i("span",{staticClass:"__cov-contrl-video-time-text"},[t._v(t._s(t.video.displayTime))])]),i("div",{staticClass:"__cov-contrl-vol-box"},[i("button",{staticClass:"__cov-contrl-play-btn",on:{click:t.volMuted}},[i("svg",{staticClass:"__cov-contrl-vol-btn-icon",attrs:{viewBox:"0 0 41 44",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("title",[t._v("vol")]),i("desc",[t._v("Created with Sketch.")]),i("defs",[i("path",{attrs:{d:"M8.61522369,12 L20,0.615223689 L20,37.3847763 L8.61522369,26 L1.99201702,26 C0.891856397,26 0,25.1029399 0,23.9941413 L0,14.0058587 C0,12.8980535 0.900176167,12 1.99201702,12 L8.61522369,12 L8.61522369,12 Z",id:"cov-vol"}})]),i("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"2",fill:"none","fill-rule":"evenodd"}},[i("g",{attrs:{id:"vol",transform:"translate(2.000000, 3.000000)"}},[i("g",{attrs:{id:"cov-vol-icon"}},[i("g",{attrs:{id:"Combined-Shape-Clipped"}},[i("path",{directives:[{name:"show",rawName:"v-show",value:t.volume.percent>1&&!t.volume.muted,expression:"volume.percent > 1 && !volume.muted"}],attrs:{d:"M25,29.5538997 C28.4589093,27.6757536 31.2629093,23.2984641 31.2629093,19.7769499 C31.2629093,16.2554357 28.4589093,11.8781461 25,10",id:"vol-range-2",stroke:"#FFFFFF"}}),i("path",{directives:[{name:"show",rawName:"v-show",value:t.volume.percent>70&&!t.volume.muted,expression:"volume.percent > 70 && !volume.muted"}],attrs:{d:"M28,35.5538997 C33.5816016,32.5231573 38.1063837,25.4595762 38.1063837,19.7769499 C38.1063837,14.0943235 33.5816016,7.03074247 28,4",id:"vol-range-2",stroke:"#FFFFFF"}}),i("mask",{attrs:{id:"mask-2",fill:"white"}},[i("use",{attrs:{"xlink:href":"#cov-vol"}})]),i("use",{attrs:{id:"vol-path",stroke:"#FFFFFF","stroke-width":"3","xlink:href":"#cov-vol"}}),i("g",{attrs:{id:"Combined-Shape",mask:"url(#mask-2)",stroke:"#FFFFFF","stroke-width":"2",fill:"#FFFFFF"}},[i("path",{attrs:{d:"M8.61522369,12 L20,0.615223689 L20,37.3847763 L8.61522369,26 L1.99201702,26 C0.891856397,26 0,25.1029399 0,23.9941413 L0,14.0058587 C0,12.8980535 0.900176167,12 1.99201702,12 L8.61522369,12 L8.61522369,12 Z",id:"cov-vol"}})])])])])])])]),i("div",{staticClass:"__cov-contrl-vol-slider",on:{click:t.volSlideClick,mousedown:t.volMove}},[i("div",{staticClass:"__cov-contrl-vol-inner",style:{transform:"translate3d("+t.volume.pos.current+"px, 0, 0)"}}),i("div",{staticClass:"__cov-contrl-vol-rail"})])]),i("button",{staticClass:"__cov-contrl-play-btn",on:{click:t.fullScreen}},[i("svg",{staticClass:"__cov-contrl-vol-btn-icon",attrs:{viewBox:"0 0 33 33",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("defs"),i("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[i("path",{attrs:{d:"M31.1682064,22 L31.1682064,31.0073537 L22,31.0073537 M22,1 L31.0073537,1 L31.0073537,10.1682064 M1,10.0073537 L1,1 L10.1682064,1 M10.0073537,31.1682064 L1,31.1682064 L1,22",id:"Combined-Shape",stroke:"#FFFFFF","stroke-width":"2"}})])])])])])])])},d=[],v=i("XyMi");function c(t){i("qE+W")}var h=!1,u=c,m=null,p=null,w=Object(v["a"])(r,a,d,h,u,m,p),g=w.exports,y={data:function(){return{video:{sources:[{src:"http://covteam.u.qiniudn.com/oceans.mp4",type:"video/mp4"}],options:{autoplay:!0,volume:.6,poster:"http://covteam.u.qiniudn.com/poster.png"}}}},components:{myVideo:g}},_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"container"},[i("my-video",{attrs:{sources:t.video.sources,options:t.video.options}})],1)])},F=[],f=!1,C=null,k=null,L=null,x=Object(v["a"])(y,_,F,f,C,k,L),$=x.exports,S={name:"app",components:{VideoFrame:$}},b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("VideoFrame")],1)},M=[];function T(t){i("+VGo")}var V=!1,B=T,E=null,N=null,H=Object(v["a"])(S,b,M,V,B,E,N),W=H.exports,R=i("iqGf");o["a"].use(R),o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(W)}}).$mount("#app")},"qE+W":function(t,e){}},[0]);
//# sourceMappingURL=app.da05db03.js.map